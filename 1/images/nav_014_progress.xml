<?xml version="1.0" encoding="UTF-8"?><!--
'*    nav_014_progress.xml
'*    Copyright (c) Websoft, All rights reserved.
--><params>
    <object>
        <label>Прогресс-индикатор простой</label>
        <width>200</width>
        <height>25</height>
        <description>Прогресс-индикатор простой</description>
		<default_color_bg>bg_color</default_color_bg>
		<default_color_border>border_color</default_color_border>
		<state_extension>false</state_extension>
   </object>
    <page name="Основные" w="320" h="200">

		<param type="label" id="lab_bg_color" text="Заливка" x="10" y="10" w="120" h="11"/>
        <param type="color" id="bg_color" text="" def="#CCCCCC" x="130" y="8" w="40" h="13"/>
		
		<param type="label" id="lab_border" text="Граница" x="10" y="26" w="120" h="11"/>
		<param type="select" id="border_style" text="" def="solid" x="130" y="24" w="118" h="13">
			<items>
				<item id="none" label="Без границы">
					<events>
						<event name="selendok" target="border_color" action="disable"/>
						<event name="selendok" target="border_width" action="disable"/>
						<event name="selendok" target="lab_border_width_px" action="disable"/>
					</events>
				</item>
				<item id="solid" label="Сплошная">
					<events>
						<event name="selendok" target="border_color" action="enable"/>
						<event name="selendok" target="border_width" action="enable"/>
						<event name="selendok" target="lab_border_width_px" action="enable"/>
					</events>
				</item>
				<item id="dotted" label="Точечная">
					<events>
						<event name="selendok" target="border_color" action="enable"/>
						<event name="selendok" target="border_width" action="enable"/>
						<event name="selendok" target="lab_border_width_px" action="enable"/>
					</events>
				</item>
				<item id="dashed" label="Пунктирная">
					<events>
						<event name="selendok" target="border_color" action="enable"/>
						<event name="selendok" target="border_width" action="enable"/>
						<event name="selendok" target="lab_border_width_px" action="enable"/>
					</events>
				</item>
				<item id="double" label="Двойная">
					<events>
						<event name="selendok" target="border_color" action="enable"/>
						<event name="selendok" target="border_width" action="enable"/>
						<event name="selendok" target="lab_border_width_px" action="enable"/>
					</events>
				</item>
				<item id="ridge" label="Гребень">
					<events>
						<event name="selendok" target="border_color" action="enable"/>
						<event name="selendok" target="border_width" action="enable"/>
						<event name="selendok" target="lab_border_width_px" action="enable"/>
					</events>
				</item>
				<item id="groove" label="Канавка">
					<events>
						<event name="selendok" target="border_color" action="enable"/>
						<event name="selendok" target="border_width" action="enable"/>
						<event name="selendok" target="lab_border_width_px" action="enable"/>
					</events>
				</item>
				<item id="inset" label="Поднимающаяся">
					<events>
						<event name="selendok" target="border_color" action="enable"/>
						<event name="selendok" target="border_width" action="enable"/>
						<event name="selendok" target="lab_border_width_px" action="enable"/>
					</events>
				</item>
				<item id="outset" label="Опускающаяся">
					<events>
						<event name="selendok" target="border_color" action="enable"/>
						<event name="selendok" target="border_width" action="enable"/>
						<event name="selendok" target="lab_border_width_px" action="enable"/>
					</events>
				</item>
			</items>
		</param>
		<param type="color" id="border_color" text="" def="#004080" x="250" y="24" w="40" h="13"/>
		<param type="label" id="lab_border_radius" text="Толщина, радиус" x="10" y="42" w="120" h="11"/>
		<param type="spinner" id="border_width" text="" def="1" x="130" y="40" w="32" h="13" min="0" max="49"/>
		<param type="label" id="lab_border_width_px" text="пкс" x="165" y="42" w="20" h="11"/>
		<param type="spinner" id="border_radius" text="" def="3" x="190" y="40" w="32" h="13" min="0" max="49"/>
		<param type="label" id="lab_border_radius_px" text="пкс" x="225" y="42" w="30" h="11"/>
		<param type="label" id="lab_shadow_strength" text="Тень" def="" x="10" y="58" w="120" h="11"/>
		<param type="select" id="shadow_strength" text="" def="normal" x="130" y="56" w="118" h="13">
			<items>
				<item id="none" label="Без тени"/>
				<item id="extralight" label="Очень слабая"/>
				<item id="light" label="Слабая"/>
				<item id="normal" label="Нормальная"/>
				<item id="dark" label="Интенсивная"/>
				<item id="extradark" label="Очень интенсивная"/>
			</items>
		</param>
	
        <param type="check" id="standard" text="Использовать стандартные иконки" def="yes" x="10" y="72" w="240" h="13">
            <events>
                <event name="check" target="custom_images" action="disable"/>
                <event name="uncheck" target="custom_images" action="enable"/>
            </events>
        </param>
		<param type="fieldset" id="custom_images">
			<param type="label" id="lab_n1_img" text="Посещенный слайд" x="10" y="90" w="120" h="11"/>
			<param type="file" id="n1_img" text="" def="" x="130" y="88" w="163" h="13" ext="Картинки (*.png;*.jpg;*.jpeg;*.gif)|*.png;*.jpg;*.jpeg;*.gif|PNG (*.png)|*.png|JPEG (*.jpg;*.jpeg)|*.jpg;*.jpeg|GIF (*.gif)|*.gif|Все файлы (*.*)|*.*|||"/>
			<param type="label" id="lab_n2_img" text="Текущий слайд" x="10" y="106" w="120" h="11"/>
			<param type="file" id="n2_img" text="" def="" x="130" y="104" w="163" h="13" ext="Картинки (*.png;*.jpg;*.jpeg;*.gif)|*.png;*.jpg;*.jpeg;*.gif|PNG (*.png)|*.png|JPEG (*.jpg;*.jpeg)|*.jpg;*.jpeg|GIF (*.gif)|*.gif|Все файлы (*.*)|*.*|||"/>
			<param type="label" id="lab_n3_img" text="Непосещенный слайд" x="10" y="122" w="120" h="11"/>
			<param type="file" id="n3_img" text="" def="" x="130" y="120" w="163" h="13" ext="Картинки (*.png;*.jpg;*.jpeg;*.gif)|*.png;*.jpg;*.jpeg;*.gif|PNG (*.png)|*.png|JPEG (*.jpg;*.jpeg)|*.jpg;*.jpeg|GIF (*.gif)|*.gif|Все файлы (*.*)|*.*|||"/>
		</param>
		
        <param type="label" id="lab_offset" text="Между иконками" x="10" y="138" w="120" h="11"/>
        <param type="spinner" id="offset" text="" def="1" x="130" y="136" w="32" h="13" min="0" max="99"/>
        <param type="label" id="lab_offset_px" text="пкс" x="165" y="138" w="30" h="11"/>
        <param type="label" text="Отбивка" x="10" y="154" w="120" h="11"/>
        <param type="spinner" id="padding" text="" def="3" x="130" y="152" w="32" h="13" min="0" max="99"/>
        <param type="label" text="пкс" x="165" y="154" w="30" h="11"/>

        <param type="label" id="lab_display_scope" text="Режим показа" x="10" y="170" w="120" h="13"/>
        <param type="select" id="display_scope" text="" def="module" x="130" y="168" w="118" h="13">
            <items>
                <item id="module" label="Весь модуль">
					<events>
						<event name="selendok" target="lab_alternative" action="hide"/>
					</events>
				</item>
                <item id="chapter" label="Только текущий раздел">
					<events>
						<event name="selendok" target="lab_alternative" action="show"/>
					</events>
				</item>
            </items>
        </param>
		<param type="label" id="lab_alternative" text="* Если определен объект Путь обучения" x="130" y="184" w="180" h="13"/>
    </page>
    <methods>
        <method name="Constructor" label="_Constructor" access="private">
            <params>
            </params>
            <body>
                <![CDATA[function Constructor(argobj)
                {
					var oCurObj = CLO[argobj.pid];
					var jCurObjDiv = $(oCurObj.div);
					oCurObj.data =
					{
						jRail: jCurObjDiv.find("tr.cl-rail"),
						jTemplate: jCurObjDiv.find("td.cl-template"),
						sChapterId: "",
						sScope: oCurObj.jxParams.children("display_scope").text(),
						sSlideId: ""
					};
					if(!CL.oPath.bAlternative || oCurObj.data.sScope!="chapter")
					{
						oCurObj.data.aPath = CL.oPath._GetSlideList();
					var jCell;
						for(var i=0; i<oCurObj.data.aPath.length; i++)
					{
							jCell = oCurObj.data.jTemplate.clone(true).appendTo(oCurObj.data.jRail).show();
							jCell.removeClass("cl-template").addClass("cl-unvisited").attr({ "id": "CELL_" + oCurObj.data.aPath[i], "cl-id": oCurObj.data.aPath[i] });
						}
					}
					CL.Event.Subscribe({ aList: [ { sId: argobj.pid, sEvtName: "EVENT_SLIDE_OPENED" } ] });
                    return true;
                }]]>
            </body>
        </method>
        <method name="HandleEvt" label="_HandleEvt" access="private">
            <params>
            </params>
            <body>
                <![CDATA[function HandleEvt(argobj)
                {
					var oCurObj = CLO[argobj.pid];
					if(oCurObj==null) return false;
					switch(argobj.evt)
					{
						case "EVENT_SLIDE_OPENED":
						{
							if(oCurObj.data.sSlideId!=CLZ.sCurrentSlideId)
							{
								oCurObj.CallMethod({ sMethod: "Update" });
								oCurObj.data.sSlideId = CLZ.sCurrentSlideId;
							}
							break;
						}
					}
					return true;
                }]]>
            </body>
        </method>
        <method name="Update" label="_Update" access="private">
            <params>
            </params>
            <body>
                <![CDATA[function Update(argobj)
                {
					var oCurObj = CLO[argobj.pid];
					var jCurObjDiv = $(oCurObj.div);
					if(!CL.oPath.bAlternative || oCurObj.data.sScope!="chapter")
					{
						for(var i=0; i<oCurObj.data.aPath.length; i++)
						{
							if(oCurObj.data.aPath[i]==CLZ.sCurrentSlideId)
							{
								oCurObj.data.jRail.children("[cl-id='" + oCurObj.data.aPath[i] + "']").removeClass("cl-unvisited cl-visited").addClass("cl-current");
							}
							else if(CL.SCO.IsVisited({ sBy: "slideid", sSlideId: oCurObj.data.aPath[i] }))
							{
								oCurObj.data.jRail.children("[cl-id='" + oCurObj.data.aPath[i] + "']").removeClass("cl-unvisited cl-current").addClass("cl-visited");
							}
							else
							{
								oCurObj.data.jRail.children("[cl-id='" + oCurObj.data.aPath[i] + "']").removeClass("cl-current cl-visited").addClass("cl-unvisited");
							}
						}
					}
					else if(CL.oPath.bAlternative && oCurObj.data.sScope=="chapter")
					{
						var sCurrentChapterId = CL.oPath._GetChapterId();
						if(sCurrentChapterId!=oCurObj.data.sChapterId)
						{
							oCurObj.data.aPath = CL.oPath._GetSlideList({ bChapter: true });
							var jCell;
							oCurObj.data.jRail.find("[cl-id]").remove();
							for(var i=0; i<oCurObj.data.aPath.length; i++)
					{
								jCell = oCurObj.data.jTemplate.clone(true).appendTo(oCurObj.data.jRail).show();
								jCell.removeClass("cl-template").addClass("cl-unvisited").attr({ "id": "CELL_" + oCurObj.data.aPath[i], "cl-id": oCurObj.data.aPath[i] });
							}
							oCurObj.data.sChapterId = sCurrentChapterId;
						}
						for(var i=0; i<oCurObj.data.aPath.length; i++)
						{
							if(oCurObj.data.aPath[i]==CLZ.sCurrentSlideId)
							{
								oCurObj.data.jRail.children("[cl-id='" + oCurObj.data.aPath[i] + "']").removeClass("cl-unvisited cl-visited").addClass("cl-current");
						}
							else if(CL.SCO.IsVisited({ sBy: "slideid", sSlideId: oCurObj.data.aPath[i] }))
						{
								oCurObj.data.jRail.children("[cl-id='" + oCurObj.data.aPath[i] + "']").removeClass("cl-unvisited cl-current").addClass("cl-visited");
						}
						else
						{
								oCurObj.data.jRail.children("[cl-id='" + oCurObj.data.aPath[i] + "']").removeClass("cl-current cl-visited").addClass("cl-unvisited");
							}
						}
					}
					return true;
                }]]>
            </body>
        </method>
    </methods>
</params>